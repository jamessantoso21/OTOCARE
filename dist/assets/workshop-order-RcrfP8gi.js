import{a as f,d as i,j as r}from"./index-7S1YI_WY.js";import{r as t}from"./vendor-react-D2XI2PP0.js";import{N as p,F as x}from"./Footer-BkaXL5t4.js";import{d as j,b as N,h as D,q as O,w as S,o as E,j as U}from"./vendor-firebase-CAApZDyK.js";import{O as g}from"./OrderCardContainer-BSvw3bUe.js";function T(){const[d,l]=t.useState([]),[v,u]=t.useState(null),[y,m]=t.useState(null);t.useEffect(()=>{const s=f.onAuthStateChanged(async e=>{if(u(e),e)try{const o=j(i,"Users",e.uid),c=await N(o);if(c.exists()){const a=c.data();m(a.UserName),h(a.UserName)}else console.error("No user document found for UID:",e.uid)}catch(o){console.error("Error fetching user data:",o)}});return()=>s()},[]);const h=async s=>{try{const e=D(i,"Orders"),o=O(e,S("orderShop","==",s),E("orderDate","desc")),a=(await U(o)).docs.map(n=>({id:n.id,...n.data()}));l(a)}catch(e){console.error("Error fetching orders:",e)}};return r.jsxs(r.Fragment,{children:[r.jsx(p,{}),r.jsx("div",{className:"orders-container",children:r.jsxs("div",{className:"orders-wrapper",children:[r.jsx("div",{className:"orders-title",children:r.jsx("h1",{children:"YOUR ORDERS (NEWEST TO OLDEST)"})}),r.jsx("div",{className:"cards-container",children:r.jsx("div",{className:"cards-wrapper",children:d.length===0?r.jsx("div",{className:"no-orders",children:"No orders found"}):d.map(s=>r.jsx(g,{docId:s.id},s.id))})})]})}),r.jsx(x,{})]})}export{T as default};
