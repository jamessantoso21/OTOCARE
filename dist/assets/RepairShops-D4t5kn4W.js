import{j as e,d as g}from"./index-7S1YI_WY.js";import{L as p,r}from"./vendor-react-D2XI2PP0.js";import{N as S,F as C}from"./Footer-BkaXL5t4.js";import{d as E,b as w,h as L,j as b}from"./vendor-firebase-CAApZDyK.js";function I(s){const t=`/shopServices/${s.title}`;return e.jsxs(p,{className:"card",to:t,children:[e.jsx("div",{className:"card-top",children:e.jsx("img",{src:s.img,className:"card-img"})}),e.jsxs("div",{className:"card-bottom",children:[e.jsx("h1",{className:"card-title",children:s.title}),e.jsxs("h2",{className:"card-subtitle",children:[" ",s.subtitle]}),e.jsx("p",{className:"card-services1",children:s.services1}),e.jsx("p",{className:"card-services2",children:s.services2}),e.jsx("p",{className:"card-services3",children:s.services3})]}),e.jsxs("div",{className:"card-rating",children:[e.jsx("img",{src:s.star,className:"rating-img"}),e.jsx("p",{className:"rating-number",children:s.rating})]})]})}function R({docId:s}){const[t,l]=r.useState(null),[d,x]=r.useState(!0),[h,c]=r.useState(null);return r.useEffect(()=>{(async()=>{try{const i=E(g,"RepairShops",s),m=await w(i);m.exists()?l(m.data()):c("No such document!")}catch(i){c("Error fetching document: "+i.message)}x(!1)})()},[s]),d?e.jsx("div",{children:"Loading..."}):h?e.jsx("div",{children:h}):e.jsx(I,{img:t.img,title:t.title,subtitle:t.subtitle,services1:t.services1,services2:t.services2,services3:t.services3,star:t.star,rating:t.rating})}function D({setResult:s}){const[t,l]=r.useState(""),[d,x]=r.useState(""),h=o=>{l(o.target.value)},c=o=>{x(o)};return r.useEffect(()=>{(async()=>{try{const i=L(g,"RepairShops"),m=await b(i);let j=[];m.forEach(n=>{const a=n.data();j.push({id:n.id,title:a.title,subtitle:a.subtitle,rating:a.rating,img:a.img,services:[a.services1,a.services2,a.services3]})});const f=t.toLowerCase(),u=j.filter(n=>{const a=n.title.toLowerCase().startsWith(f),v=d===""||n.services.some(N=>N.toLowerCase()===d.toLowerCase());return a&&v});u.sort((n,a)=>n.title.localeCompare(a.title)),s(u),console.log(u)}catch(i){console.error("Error fetching data:",i),s([])}})()},[t,d,s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"searchBar-container",children:e.jsx("input",{className:"searchBar",type:"text",placeholder:"Search...",value:t,onChange:h})}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"SERVICES"}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"#",onClick:()=>c("OIL & FLUIDS"),children:"OIL & FLUIDS"})}),e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"#",onClick:()=>c("WHEELS"),children:"WHEELS"})}),e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"#",onClick:()=>c("ELECTRICALS"),children:"ELECTRICALS"})}),e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"#",onClick:()=>c(""),children:"RESET"})})]})]})]})}function A(){const[s,t]=r.useState([]);return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx("div",{className:"title-container",children:e.jsxs("div",{className:"title-wrapper",children:[e.jsx("div",{className:"title-left",children:e.jsx("h1",{children:"REPAIR SHOPS"})}),e.jsx("div",{className:"title-right",children:e.jsx(D,{setResult:t})})]})}),e.jsx("div",{className:"cards-container",children:e.jsx("div",{className:"cards-wrapper",children:s.map(l=>e.jsx("button",{className:"repairShop-card-wrapper",children:e.jsx(R,{docId:l.id})},l.id))})}),e.jsx(C,{})]})}export{A as default};
