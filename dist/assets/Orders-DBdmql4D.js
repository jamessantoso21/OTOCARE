import{a as j,d as p,j as r}from"./index-7S1YI_WY.js";import{r as t}from"./vendor-react-D2XI2PP0.js";import{N as d,F as i}from"./Footer-BkaXL5t4.js";import{h as f,q as g,w as N,o as v,j as O}from"./vendor-firebase-CAApZDyK.js";import{O as E}from"./OrderCardContainer-BSvw3bUe.js";function R(){const[n,l]=t.useState([]),[h,m]=t.useState(null);t.useEffect(()=>{const e=j.onAuthStateChanged(s=>{m(s),s&&u(s.uid)});return()=>e()},[]);const u=async e=>{console.log("Fetching orders for UID:",e);try{const s=f(p,"Orders"),x=g(s,N("userUID","==",e),v("orderDate","desc"));console.log("Query created");const c=await O(x);console.log("Query snapshot:",c.size);let o=[];c.forEach(a=>{console.log("Found document:",a.id,a.data()),o.push(a.id)}),console.log("Final items array:",o),l(o)}catch(s){console.error("Error fetching data:",s)}};return h?r.jsxs(r.Fragment,{children:[r.jsx(d,{}),r.jsx("div",{className:"orders-container",children:r.jsxs("div",{className:"orders-wrapper",children:[r.jsx("div",{className:"orders-title",children:r.jsx("h1",{children:"YOUR ORDERS (NEWEST TO OLDEST)"})}),r.jsx("div",{className:"cards-container",children:r.jsx("div",{className:"cards-wrapper",children:n.length===0?r.jsx("div",{className:"no-orders",children:"No orders found"}):n.map(e=>r.jsx(E,{docId:e},e))})})]})}),r.jsx(i,{})]}):r.jsxs(r.Fragment,{children:[r.jsx(d,{}),r.jsx("div",{className:"orders-container",children:r.jsx("div",{className:"orders-wrapper",children:r.jsx("div",{className:"orders-title",children:r.jsx("h1",{children:"Please login to view your orders"})})})}),r.jsx(i,{})]})}export{R as default};
